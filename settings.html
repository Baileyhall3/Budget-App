<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="styling.css">
    <link rel="icon" type="image/x-icon" href="images/money-bag.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="scripts/navbar-loader.js" defer></script>
    <style>
        .settings-container {
            padding: 20px;
            margin-top: 50px;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f4f4f9;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 20%;
            margin: auto;
        }
        .settings-container h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .settings-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .settings-section h3 {
            margin: 0;
            flex: 1;
        }
        /* Rounded and styled dropdowns */
        .dropdown-select {
            width: 200px;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: #fff;
            color: #333;
            font-size: 16px;
            appearance: none; /* Removes default arrow in most browsers */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: border-color 0.3s ease;
        }
        .dropdown-select:focus {
            outline: none;
            border-color: #45a049; /* Green border on focus */
        }
        /* Custom dropdown arrow */
        .dropdown-select::after {
            content: '▼';
            position: absolute;
            right: 10px;
            pointer-events: none;
        }
        /* Block layout for notifications */
        .notifications-section {
            margin-bottom: 30px;
        }
    </style>
</head>
<body>

<div id="navbar-placeholder"></div>

<div class="settings-container">
    <h2>SETTINGS</h2>
    
    <div style="border-bottom: 1px solid rgb(131 131 131);">
        <!-- Default Currency -->
        <div class="settings-section">
            <h3>Default Currency</h3>
            <select id="currency-selector" class="dropdown-select">
                <option value="GBP">British Pound (£)</option>
                <option value="USD">US Dollar ($)</option>
                <option value="EUR">Euro (€)</option>
            </select>
        </div>

        <!-- Default Account -->
        <div class="settings-section">
            <h3>Default Account</h3>
            <select id="default-account" class="dropdown-select">
                <option value="barclays">Barclays</option>
                <option value="savings">Savings</option>
                <option value="monzo">Monzo</option>
            </select>
        </div>

        <!-- Budget Period -->
        <div class="settings-section">
            <h3>Budget Period</h3>
            <select id="budget-period" class="dropdown-select">
                <option value="weekly">Weekly</option>
                <option value="monthly" selected>Monthly</option>
                <option value="bi-monthly">Bi-Monthly</option>
            </select>
        </div>
    </div>
    
    <!-- Notification Preferences -->
    <div class="notifications-section">
        <h3>Notifications</h3>
        <label><input type="checkbox" id="transaction-alerts" checked> Transaction Alerts</label><br>
        <label><input type="checkbox" id="weekly-summary"> Weekly Summary</label><br>
        <label><input type="checkbox" id="budget-alerts" checked> Budget Alerts</label>
    </div>

    <!-- Dark Mode -->
    <div class="notifications-section">
        <h3>Theme</h3>
        <div>
            <label><input type="radio" name="theme" value="light"> Light Mode</label><br>
            <label><input type="radio" name="theme" value="dark"> Dark Mode</label><br>
            <label><input type="radio" name="theme" value="auto" checked> Auto (System Default)</label>
        </div>
    </div>
</div>

<script>
    // Sample code to save settings (placeholder)
    document.getElementById('currency-selector').addEventListener('change', function() {
        const selectedCurrency = this.value;
        console.log('Default currency changed to:', selectedCurrency);
        // Save this value to localStorage or backend
    });

    document.getElementById('transaction-alerts').addEventListener('change', function() {
        const alertsEnabled = this.checked;
        console.log('Transaction alerts:', alertsEnabled);
        // Save this value to localStorage or backend
    });

    document.querySelectorAll('input[name="theme"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const selectedTheme = this.value;
            console.log('Theme changed to:', selectedTheme);
            // Apply theme and save preference to localStorage or backend
        });
    });

    document.getElementById('default-account').addEventListener('change', function() {
        const selectedAccount = this.value;
        console.log('Default account set to:', selectedAccount);
        // Save this value to localStorage or backend
    });

    document.getElementById('budget-period').addEventListener('change', function() {
        const selectedPeriod = this.value;
        console.log('Budget period set to:', selectedPeriod);
        // Save this value to localStorage or backend
    });

    // Toggle dark mode
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    const body = document.body;

    // Check localStorage for saved dark mode preference
    if (localStorage.getItem('dark-mode') === 'enabled') {
        enableDarkMode();
    }

    // Add event listener for the dark mode toggle button
    darkModeToggle.addEventListener('click', () => {
        console.log('working')
        if (body.classList.contains('dark-mode')) {
            disableDarkMode();
        } else {
            enableDarkMode();
        }
    });

    // Function to enable dark mode
    function enableDarkMode() {
        body.classList.add('dark-mode');
        localStorage.setItem('dark-mode', 'enabled'); // Save the preference in localStorage
    }

    // Function to disable dark mode
    function disableDarkMode() {
        body.classList.remove('dark-mode');
        localStorage.setItem('dark-mode', 'disabled'); // Save the preference in localStorage
    }
</script>

</body>
</html>
