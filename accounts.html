<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accounts Page</title>
    <link rel="stylesheet" href="styling.css">
    <link rel="icon" type="image/x-icon" href="images/money-bag.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.1.1/chart.min.js"></script>
    <script src="scripts/navbar-loader.js" defer></script>
    <link rel="stylesheet" href="modal-styling.css">
    <script src="scripts/modals.js"></script>
    <script src="scripts/shared.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .account-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background-color: #f4f4f9;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 40px;
            /* width: 100%; */
        }

        .content-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 80%; /* Make the wrapper wider */
            margin: 0 auto; /* Center the wrapper */
            margin-left: 250px;
            transition: margin-left 0.3s ease;
        }

        .account-chart-container {
            width: 50%;
        }

        .account-details {
            width: 45%;
        }

        .account-details h5 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .transaction {
            margin-top: 20px;
            margin-bottom: 20px;
            border-top: 1px solid rgb(131, 131, 131);
            padding-top: 10px;
        }

        .money-bar-header {
            justify-content: space-between;
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .truncate {
            text-overflow: ellipsis;
            width: 100%;
            white-space: nowrap;
            overflow: hidden;
        }

        canvas {
            max-width: 100%; /* Ensure canvas doesn't overflow */
        }
    </style>
</head>
<body>
    <div id="navbar-placeholder"></div>

    <div class="content-wrapper">
        <div style="width: 80%; margin-top: 40px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h2>My Accounts</h2>
                <h3><a class="link" href="#" id="addAccount">Add New</a></h3>
            </div>
            <div style="margin-bottom: 30px; align-self: self-start;">
                <div id="barclays-account" class="account-container container-rounded-pointer">
                    <div class="account-chart-container">
                        <canvas id="account1-chart"></canvas>
                    </div>
                    <div class="account-details">
                        <h5>Barclays</h5>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0; color: rgb(131, 131, 131);">Greggs</h5>
                                <p style="font-size: 20px; margin: 0;">- £3.40</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Food</h5>
                                <p style="font-size: 14px; margin: 0;">4 hours ago</p>
                            </div>
                        </div>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0; color: rgb(131, 131, 131);">Pizza Grande</h5>
                                <p style="font-size: 20px; margin: 0;">- £44.40</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Food</h5>
                                <p style="font-size: 14px; margin: 0;">Yesterday</p>
                            </div>
                        </div>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0;">Deposit</h5>
                                <p style="font-size: 20px; margin: 0; color: #45a049">£2,000</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Paycheck</h5>
                                <p style="font-size: 14px; margin: 0;">2 days ago</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="account-container container-rounded-pointer">
                    <div class="account-chart-container">
                        <canvas id="account1-chart"></canvas>
                    </div>
                    <div class="account-details">
                        <h5>Monzo</h5>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0; color: rgb(131, 131, 131);">Greggs</h5>
                                <p style="font-size: 20px; margin: 0;">- £3.40</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Food</h5>
                                <p style="font-size: 14px; margin: 0;">4 hours ago</p>
                            </div>
                        </div>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0; color: rgb(131, 131, 131);">Pizza Grande</h5>
                                <p style="font-size: 20px; margin: 0;">- £44.40</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Food</h5>
                                <p style="font-size: 14px; margin: 0;">Yesterday</p>
                            </div>
                        </div>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0;">Deposit</h5>
                                <p style="font-size: 20px; margin: 0; color: #45a049">£2,000</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Paycheck</h5>
                                <p style="font-size: 14px; margin: 0;">2 days ago</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="account-container container-rounded-pointer">
                    <div class="account-chart-container">
                        <canvas id="account1-chart"></canvas>
                    </div>
                    <div class="account-details">
                        <h5>Joint Account</h5>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0; color: rgb(131, 131, 131);">Greggs</h5>
                                <p style="font-size: 20px; margin: 0;">- £3.40</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Food</h5>
                                <p style="font-size: 14px; margin: 0;">4 hours ago</p>
                            </div>
                        </div>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0; color: rgb(131, 131, 131);">Pizza Grande</h5>
                                <p style="font-size: 20px; margin: 0;">- £44.40</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Food</h5>
                                <p style="font-size: 14px; margin: 0;">Yesterday</p>
                            </div>
                        </div>
                        <div class="transaction">
                            <div class="money-bar-header">
                                <h5 style="font-size: 18px; margin: 0;">Deposit</h5>
                                <p style="font-size: 20px; margin: 0; color: #45a049">£2,000</p>
                            </div>
                            <div class="money-bar-header" style="margin-bottom: 20px;">
                                <h5 style="font-size: 16px; margin: 0; color: rgb(131, 131, 131); font-weight: 100;">Paycheck</h5>
                                <p style="font-size: 14px; margin: 0;">2 days ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--New Account Modal-->
    <div id="newAccountModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>New Account</h2>
            </div>
            
            <form id="newAccountForm">
                <label for="accountName">Account Name:</label>
                <input type="text" id="accountName" name="accountName" required>
            
                <label for="defaultCurrency">Default Currency:</label>
                <select id="defaultCurrency" name="defaultCurrency" required>
                    <option value="£">£ - British Pound</option>
                    <option value="€">€ - Euro</option>
                </select>
            
                <label for="accountType">Account Type:</label>
                <select id="accountType" name="accountType" required>
                    <option value="personal">Personal</option>
                    <option value="savings">Savings</option>
                    <option value="joint">Joint</option>
                </select>
            
                <!-- Joining Partner Field (Disabled unless 'Joint' is selected) -->
                <label for="joiningPartner">Joining Partner:</label>
                <input type="text" id="joiningPartner" name="joiningPartner" disabled>
            
                <label for="defaultAccount">
                    <input type="checkbox" id="defaultAccount" name="defaultAccount">
                    Make this my default account
                </label>
            
                <button type="submit" class="btn">Create Account</button>
            </form>
        </div>
    </div>
    

    <script>

        const labels = getLast7Days(); // fn resides in shared.js

        const ctx = document.getElementById('account1-chart').getContext('2d');
        const data = {
            labels: labels,
            datasets: [{
                label: 'Spending',
                data: [50, 80, 60, 120, 40, 70, 90], // Example static data for 7 days
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        };
        const options = {
            scales: {
                y: {
                    beginAtZero: true,
                    max: 120 // Set the max y-axis value to 120
                }
            }
        };
        new Chart(ctx, {
            type: 'bar',
            data: data,
            options: options
        });

        const accountLink = document.getElementById('barclays-account');
        accountLink.addEventListener('click', openAccountPage);

        function openAccountPage() {
            window.location.href = 'account.html';
        }

    </script>
</body>
</html>
